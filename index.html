<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wave Runner</title>

    <script src="../p5_addons/p5.min.js"></script>
    <script src="../p5_addons/p5.dom.min.js"></script>
    <script src="../p5_addons/p5.sound.min.js"></script>

    <script src="classes/Hero.js"></script>
    <script src="classes/Platform.js"></script>
    <script src="classes/Ship.js"></script>
    <script src="classes/Eggman.js"></script>
    <script src="classes/Ring.js"></script>
    
    <script src="create_stage/create_land.js"></script>
    <script src="create_stage/create_platforms.js"></script>
    <script src="create_stage/create_rings.js"></script>
    <script src="create_stage/create_ships.js"></script>
    <script src="create_stage/spawn_field.js"></script>
    <script src="create_stage/score_count.js"></script>

    <script src="controls/music_controls.js"></script>
    <script src="controls/hero_controls.js"></script>

    <script src="sprites/load_sprites.js"></script>
    
  </head>

  <body>
      
      <script>
            let song;
            let volumeArray = [];
            let waveYArray = [];
            let platforms = [];
            let rings = [];
            let ships = [];
            let truck;
            let wavesArray;
            let seekLinePos;
            let jumpLimit = 5;
            let currentJump = 0;
        
        function preload() {
          loadSprites();
          ringWav = loadSound('music_files/ring_collected.wav');
          enemyWav = loadSound('music_files/enemy_destroyed.wav');
          jumpWav = loadSound('music_files/jump_long.wav');
        }

        function setup() {
          createCanvas(1200, 800);
  
          song = loadSound('music_files/escape.mp3', loaded);
          
          amp = new p5.Amplitude();
          hero = new Hero();
          eggman = new Eggman();
          frameRate(30); 
          createPlatforms();
          createRings();
          createShips();
        }

        
        function loaded() {
          console.log('loaded');
          button = createButton('play');
          button.mousePressed(toggle);
        }


        function draw() {
          background(0);
          drawWaves();
          
          spawnShips();
          spawnPlatforms();
          spawnRings();
          // spawnEggman();
  
          darkSide();
          platforms[0].displayPlatform('first');
          
          hero.move();
          hero.display();
          heroCommands();
  
          drawScore();
        }


      </script>
    
  </body>
</html>
